; ========================================
; Эндпоинты (полные учётные записи)
; ========================================

; Оператор 201
[201]
type = endpoint
context = operators
disallow = all
allow = ulaw
allow = alaw
auth = auth-201              ; ← Ссылка на аутентификацию
aors = 201                   ; ← Ссылка на AOR
callerid = "Оператор 1" <201>
direct_media = no            ; Запретить прямой обмен медиа (через сервер)
rtp_symmetric = yes          ; Симметричный RTP (для NAT)
force_rport = yes            ; Принудительный порт (для NAT)
rewrite_contact = yes        ; Переписывать контакт (для NAT)
transport = transport-udp    ; Использовать UDP транспорт
dtmf_mode = rfc4733          ; DTMF через RTP (современный стандарт)
mailboxes = 201@default      ; Голосовая почта

; Оператор 202
[202]
type = endpoint
context = operators
disallow = all
allow = ulaw
allow = alaw
auth = auth-202
aors = 202
callerid = "Оператор 2" <202>
direct_media = no
rtp_symmetric = yes
force_rport = yes
rewrite_contact = yes
transport = transport-udp
dtmf_mode = rfc4733
mailboxes = 202@default

; Оператор 203
[203]
type = endpoint
context = operators
disallow = all
allow = ulaw
allow = alaw
auth = auth-203
aors = 203
callerid = "Оператор 3" <203>
direct_media = no
rtp_symmetric = yes
force_rport = yes
rewrite_contact = yes
transport = transport-udp
dtmf_mode = rfc4733
mailboxes = 203@default

; Внешний клиент (без аутентификации)
[external-client]
type = endpoint
context = external
disallow = all
allow = ulaw,alaw
aors = external-clients
callerid = "Клиент" <291234567>
direct_media = no
rtp_symmetric = yes
force_rport = yes
rewrite_contact = yes
transport = transport-udp
dtmf_mode = rfc4733
; Критически важно для анонимных вызовов:
auth =
; Явно указываем обработку анонимных вызовов:
identify_by = ip