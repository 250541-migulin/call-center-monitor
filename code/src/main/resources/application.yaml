# ========================================
# Основная конфигурация приложения
# Лабораторная работа №5: Реализация учебного проекта
# ========================================

spring:
  application:
    name: call-center-monitor
    version: 1.0.0

  # Профиль по умолчанию — разработка
  profiles:
    active: dev

  # Общие настройки веб-слоя
  web:
    resources:
      add-mappings: true

# ========================================
# Подключение к Asterisk AMI
# ========================================
asterisk:
  ami:
    # Хост можно переопределить через переменную окружения
    host: ${ASTERISK_HOST:172.20.200.40}
    port: ${ASTERISK_PORT:5038}
    username: ${ASTERISK_USERNAME:monitor}
    password: ${ASTERISK_PASSWORD:mysecret123}

    # Настройки соединения
    auto-reconnect: true
    timeout: 5000
    keep-alive: true

    # Интервалы опроса очереди
    queue:
      poll-interval: 5000  # 5 секунд
      name: support

# ========================================
# Общие настройки сервера
# ========================================
server:
  port: ${SERVER_PORT:8080}
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: on_param
    include-exception: true

# ========================================
# Общие настройки логирования
# ========================================
logging:
  pattern:
    dateformat: yyyy-MM-dd HH:mm:ss.SSS
  file:
    path: logs
    name: ${logging.file.path}/${spring.application.name}.log
    max-size: 50MB
    max-history: 30

# ========================================
# Мониторинг и метрики
# ========================================
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized
      roles: ADMIN

# ========================================
# Безопасность (для будущих улучшений)
# ========================================
security:
  enabled: false

# ========================================
# Кастомные свойства приложения
# ========================================
app:
  version: 1.0.0
  environment: ${spring.profiles.active}