# UC9: Просмотреть звонки вне рабочего времени

## Актёр
Руководитель

## Описание
Руководитель просматривает список звонков, поступивших вне установленного рабочего времени (например, до 09:00 или после 18:00), чтобы оценить нагрузку и принять решение о необходимости обратного звонка.  
Все звонки помечаются автоматически на основе настроек из **UC2**.

## Предусловия
- В системе настроено рабочее время (например, 09:00–18:00) — результат UC2.
- За выбранный период имеются звонки вне этого интервала.

## Основной поток событий (Flow of Events)
1. Руководитель переходит в раздел **«Аналитика» → «Звонки вне графика»**.
2. Система отображает форму выбора периода:
   - Выпадающий список: `Сегодня`, `Неделя`, `Месяц`,
   - Поля для произвольного диапазона (два календаря).
3. Руководитель выбирает период и нажимает **«Применить»**.
4. Система запрашивает данные у сервиса аналитики (`OutOfHoursService`).
5. Система фильтрует звонки, время которых **не попадает в интервал рабочего времени**.
6. Система отображает таблицу со следующими колонками:
   - Дата и время звонка,
   - Номер клиента,
   - Длительность (если был ответ; иначе «Пропущен»),
   - Метка: **«Внерабочее время»**.
7. Система **исключает эти звонки** из общей статистики пропущенных вызовов (требование 3.1.11).

## Альтернативные потоки

### A1: Нет звонков вне графика
1. На шаге 5 система получает пустой результат.
2. Система отображает: **«Нет звонков вне рабочего времени за указанный период»**.

### A2: Некорректный период
1. Руководитель задаёт период: `с 20.01.2026 по 10.01.2026`.
2. Система проверяет даты при нажатии «Применить».
3. Система показывает: **«Дата начала не может быть позже даты окончания»**.

### A3: Ошибка загрузки данных
1. Возникает сбой БД или таймаут.
2. Система отображает: **«Не удалось загрузить данные. Повторите попытку»** с кнопкой **«Повторить»**.

### A4: Сброс фильтров
1. Руководитель нажимает **«Сбросить»**.
2. Система возвращает период к значению по умолчанию (`Сегодня`) и обновляет таблицу.

## Постусловия
- Руководитель получает информацию о нагрузке вне графика.
- Данные могут быть использованы для:
  - планирования расширенного графика,
  - организации обратных звонков,
  - анализа клиентского поведения.
- Эти звонки **не влияют** на KPI операторов.

## Примечание
- Этот Use Case **не требует участия оператора** — все метки проставляются автоматически.
- Таблица может быть **экспортирована в CSV** (см. UC8).
- Интерфейс должен быть отражён в [Мокап руководителя](/docs/mocks/admin-view.png).