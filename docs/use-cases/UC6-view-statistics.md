# UC6: Просмотреть статистику по операторам

## Актёр
Руководитель

## Описание
Руководитель просматривает аналитическую информацию о работе операторов: количество принятых и пропущенных звонков, процент решённых обращений, среднюю длительность разговора.  
Статистика учитывает только **звонки в рабочее время** (согласно настройкам из UC2).

## Предусловия
- В системе есть зарегистрированные операторы.
- За выбранный период имеются зафиксированные звонки и обращения.

## Основной поток событий (Flow of Events)
1. Руководитель переходит в раздел **«Аналитика»**.
2. Система отображает панель фильтров:
   - **Период**: выпадающий список (`Сегодня`, `Неделя`, `Месяц`) + поля для произвольного диапазона (два календаря),
   - **Оператор**: чекбоксы или мультиселект («Все», «Оператор 1», «Оператор 2», ...).
3. Руководитель выбирает параметры и нажимает кнопку **«Применить»**.
4. Система отправляет запрос в сервис аналитики (`AnalyticsService`).
5. Система получает агрегированные данные из базы.
6. Система отображает:
   - **Таблицу** с колонками:
     - Имя оператора,
     - Входящие звонки,
     - Принятые,
     - Пропущенные (только в рабочее время),
     - % решённых,
     - Средняя длительность (сек).
   - **График** (столбчатая диаграмма) под таблицей для визуального сравнения.

## Альтернативные потоки

### A1: Нет данных за период
1. На шаге 5 система получает пустой результат.
2. Система отображает: **«Нет данных за указанный период»** вместо таблицы и графика.

### A2: Некорректный период (начало > конца)
1. Руководитель задаёт период: `с 20.01.2026 по 10.01.2026`.
2. При нажатии «Применить» система проверяет даты.
3. Система показывает: **«Дата начала не может быть позже даты окончания»** и не выполняет запрос.

### A3: Ошибка загрузки данных
1. На шаге 5 возникает ошибка БД или таймаут.
2. Система отображает: **«Не удалось загрузить статистику. Повторите попытку»** с кнопкой **«Повторить»**.

### A4: Сброс фильтров
1. Руководитель нажимает кнопку **«Сбросить»**.
2. Система возвращает фильтры к значениям по умолчанию (`Сегодня`, `Все операторы`) и обновляет данные.

## Постусловия
- Руководитель получает объективную картину эффективности работы операторов.
- Данные могут быть использованы для:
  - планирования нагрузки,
  - выявления слабых мест в обучении,
  - мотивации персонала.

## Примечание
- Статистика **исключает звонки вне рабочего времени** из расчёта пропущенных (требование 3.1.11).
- Интерфейс должен быть реализован в [Мокап руководителя](/docs/mocks/admin-view.png). (панель фильтров + таблица + график).