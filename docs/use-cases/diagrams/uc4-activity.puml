@startuml
title UC4: Заполнить карточку клиента

skinparam wrapWidth 30
skinparam activityFontSize 12

start

:Система открывает форму\n«Карточка клиента»\n(телефон предзаполнен);

:Оператор вводит Имя\n(обязательно);
:Оператор вводит Организацию\n(опционально);

if (Нажата «Сохранить»?) then (Да)
  if (Поле «Имя» заполнено?) then (Да)
    :Сохранить данные в БД;
    :Показать:\n«Карточка обновлена»;
    :Вернуться к UC3;
    stop
  else (Нет)
    :Ошибка:\n«Имя обязательно»;
    :Форма остаётся открытой;
    stop
  endif
else (Нажата «Отмена»?)
  :Подтвердить отмену?;
  if (Да) then (Да)
    :Вернуться к UC3\n(без сохранения);
    stop
  else (Нет)
    :Остаться в форме;
    stop
  endif
endif

@enduml