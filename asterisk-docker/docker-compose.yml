services:
  asterisk:
    image: andrius/asterisk:latest
    container_name: asterisk
    ports:
      - "5060:5060/udp"           # SIP
      - "5038:5038/tcp"           # AMI
      - "10000-10100:10000-10100/udp"  # RTP для аудио
    volumes:
      - ./asterisk-config:/etc/asterisk  # ← Монтируем ВСЮ директорию
      - ./asterisk-logs:/var/log/asterisk
      - ./asterisk-sounds:/var/lib/asterisk/sounds
    networks:
      - callcenter-network
    restart: unless-stopped
    # Для отладки: показывать логи в реальном времени
    # command: ["asterisk", "-vvv", "-f"]

networks:
  callcenter-network:
    driver: bridge